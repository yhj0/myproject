<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">

<mapper namespace="member">
    <insert id="insertMember" parameterType="gu.member.MemberVO" >
        INSERT INTO TBL_MEMBER(ID, PASSWORD, NAME, NICK_NAME, EMAIL, REG_DTTM)
        VALUES (#{id}, #{password}, #{name}, #{nick_name},#{email},NOW())
    </insert> 
    
    <select id="checkID" resultType="String">
        SELECT COUNT(*)
          FROM TBL_MEMBER
         WHERE 1=1
           AND ID=#{id}
    </select> 

<!--이미지업로드 =============================================================================== -->  
	<insert id="insertImage" parameterType="gu.common.ImageVO">
    INSERT INTO TBL_IMAGE 
     	(
         IMGNO,
    	 FILENAME,
    	 FILESIZE,
    	 REG_ID, 
         REG_DTTM, 
         CHG_ID, 
         CHG_DTTM)
        VALUES
        (
       	 (SELECT IFNULL(MAX(IMGNO),0)+1 FROM TBL_IMAGE A),
         #{filename},
         #{filesize},
         #{parentPK},
  		 NOW(),
  		 NULL,
  		 NULL   
    	)   
	</insert>

</mapper>    